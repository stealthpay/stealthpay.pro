<script>
  const p = prompt("Sláðu inn lykilorð:");
  if (p !== "!") { alert("Aðgangur hafnað."); location.href = "https://google.com"; }
</script>
<!doctype html>
<html lang="is">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>StealthPay – Stjórnborð</title>
  <link rel="icon" href="logo.png"/>
  <script src="/api/env.js"></script>
  <style>
    :root{
      --bg:#0b0e12;--card:#10141a;--text:#e8eef7;--muted:#9aa6b2;--line:#1e2530;
      --grad1:#10b981;--grad2:#2563eb;--focus:#2563eb;--danger:#f59e0b;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif}
    .page{max-width:1100px;margin:32px auto;padding:0 16px}
    h1{margin:0 0 8px}
    .muted{color:var(--muted)}
    .cards{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px}
    .card{background:var(--card);border:1px solid:var(--line);border-radius:16px;padding:16px}
    .balance{font-size:40px;font-weight:800;margin:12px 0 16px}
    .btn{padding:10px 14px;border-radius:10px;border:1px solid var(--line);background:#0f1216;color:var(--text);cursor:pointer}
    .btn.primary{border:none;background:linear-gradient(90deg,var(--grad1),var(--grad2));font-weight:700}
    .list{margin-top:18px}
    .row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-top:1px solid var(--line)}
    .label{display:flex;align-items:center;gap:10px}
    a.link{color:#8ab4ff;text-decoration:none}
    /* ===== Topup modal ===== */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none}
    .overlay.open{display:block}
    .modal{position:fixed;inset:0;display:none;place-items:center}
    .modal.open{display:grid}
    .modal-card{width:min(720px,96vw);background:var(--card);border:1px solid var(--line);border-radius:20px;padding:18px 16px;box-shadow:0 18px 45px rgba(0,0,0,.45)}
    .modal h2{margin:6px 0 10px}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    label{font-weight:600}
    input, .field{width:100%;padding:12px 14px;border-radius:10px;border:1px solid var(--line);background:#0d1116;color:var(--text);outline:none}
    input:focus{border-color:var(--focus);box-shadow:0 0 0 4px rgba(37,99,235,.15)}
    .quick{display:flex;gap:10px;flex-wrap:wrap}
    .pill{padding:8px 12px;border:1px solid var(--line);border-radius:24px;background:#0f1216;cursor:pointer}
    .row-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
    .btn.warn{border:1px solid var(--line);background:#171a1f}
    .tag{font-size:12px;color:#cbd5e1}
    .right{display:flex;gap:10px}
    .qr-btn{min-width:120px}
    .hr{height:1px;background:var(--line);margin:12px 0}
  </style>
</head>
<body>
  <div class="page">
    <h1 id="welcome">Velkominn aftur</h1>
    <div class="muted" id="acctLine">Hvað er staðan á reikningnum þínum í dag?</div>

    <div class="cards">
      <div class="card">
        <div class="muted">Heildarstaða</div>
        <div class="balance" id="totalBalance">0 kr</div>
        <button id="openTopup" class="btn primary">Fylling á reikning</button>
        <div class="list">
          <div class="row"><div class="label">Móttaka inn á reikning</div><div class="muted">+85.000 kr · Lokið</div></div>
          <div class="row"><div class="label">Millifærsla milli reikninga</div><div class="muted">+150.000 kr · Lokið</div></div>
          <div class="row"><div class="label">Úttekt</div><div class="muted">+45.000 kr · Lokið</div></div>
        </div>
        <div style="margin-top:16px"><a class="link" href="index.html">← Til baka á forsíðu</a></div>
      </div>

      <div class="card">
        <div class="muted">QR Reikningur</div>
        <div style="height:220px;border:1px dashed var(--line);border-radius:14px;display:grid;place-items:center;margin-top:10px" class="muted">
          [ QR – placeholder ]
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Topup modal ===== -->
  <div id="overlay" class="overlay"></div>
  <div id="topupModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <h2>Fylling</h2>
      <div class="muted">Upphæð (ISK kr)</div>
      <div class="quick" id="quickBtns">
        <button class="pill" data-amt="1000">1.000</button>
        <button class="pill" data-amt="10000">10.000</button>
        <button class="pill" data-amt="100000">100.000</button>
        <button class="pill" data-amt="1000000000">1.000.000.000</button>
      </div>

      <div class="grid">
        <input id="amountInput" inputmode="numeric" placeholder="0"/>
      </div>

      <div style="height:6px"></div>
      <label>Móttakandi reikningsnúmer</label>
      <div class="right">
        <input id="receiverInput" placeholder="Slá inn reikningsnúmer" class="field" style="flex:1"/>
        <button class="btn qr-btn" id="scanQr">Skanna<br/>QR</button>
      </div>

      <div style="height:10px"></div>
      <div id="calcBox" class="muted">
        <div id="fillLine">Fylling0 kr</div>
        <div id="pA">Aðili A0 kr</div>
        <div id="pB">Aðili B0 kr</div>
        <div id="pC">Aðili C0 kr</div>
      </div>

      <div class="hr"></div>
      <div style="font-weight:700" id="sumPaid">Samtals greitt0 kr</div>
      <div id="sumToAcct" class="muted">Fæst á reikning0 kr</div>
      <div id="estDai" class="muted">Áætlað DAI0.00 DAI</div>

      <div class="row-actions">
        <button id="cancelTopup" class="btn warn">Hætta við</button>
        <button id="payCard" class="btn primary">Greiða með korti</button>
      </div>
    </div>
  </div>

  <script src="/topup.js"></script>
</body>
</html>
